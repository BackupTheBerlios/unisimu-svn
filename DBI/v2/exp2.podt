=head1 NAME

实验二 - 数据库的查询实验

=head1 实验目的

要求学生掌握 SQL Server 查询分析器和 T-SQL 语言的使用方法，熟练掌握和使用简
单表的数据查询、数据排序和数据连接查询、嵌套查询等操作方法。

=head1 实验要求

用 T-SQL 语言表示以下操作：

=over

=item 1.

检索上海产的零件的工程名称；

=item 2.

检索供应工程 J1 零件 P1 的供应商号 SNO；

=item 3.

检索供应工程 J1 零件为红色的供应商号 SNO；

=item 4.

检索没有使用天津生产的红色零件的工程号 JNO；

=item 5.

检索至少用了供应商 S1 所供应的全部零件的工程号 JNO；

=item 6.

检索购买了零件 P1 的工程项目号 JNO 及数量 QTY，并要求对查询的结果按数量 QTY 降序排列。

=back

=head1 实验结果

为什么要使用 T-SQL 呢？我宁可使用标准的可移值的 SQL 语言，呵呵。

首先给出数据库的数据吧：

=over

=item *

S 表

=SQL select * from S

=item *

P 表

=SQL select * from P

=item *

J 表

=SQL select * from J

=item *

SPJ 表

=SQL select * from SPJ

=back

下面给出每一个查询目标的 SQL 代码及对应的查询结果。

=over

=item *

检索上海产的零件的工程名称

=begin SQL

select distinct JNAME
from S, SPJ, J
where S.SNO = SPJ.SNO and SPJ.JNO = J.JNO
	and S.CITY = '上海'

=end SQL

=item *

检索供应工程 J1 零件 P1 的供应商号 SNO

=begin SQL

select SNO
from SPJ
where JNO = 'J1' and PNO = 'P1'

=end SQL

=item *

检索供应工程 J1 零件为红色的供应商号 SNO；

=begin SQL

select distinct SNO
from SPJ,P
where SPJ.PNO = P.PNO and JNO = 'J1' and
	COLOR = '红'

=end SQL

=item *

从供应商关系中删除 S2 的记录，并从供应情况关系中删除相应的记录

=SQL delete from SPJ where SNO = 'S2'

=SQL delete from S where SNO = 'S2'

=back
